{"ast":null,"code":"import auth0 from 'auth0-js';\nconst LOGIN_SUCCESS = \"/secret\";\nconst LOGIN_FAILURE = \"/\";\nexport default class Auth {\n  constructor() {\n    this.auth0 = new auth0.WebAuth({\n      domain: \"musibs.auth0.com\",\n      clientID: \"Le06hTcIFWT27UYrBw4c8ByPnSNVcolq\",\n      redirectUri: \"http://localhost:3000/callback\",\n      audience: \"https://musibs.auth0.com/userinfo\",\n      responseType: \"token id_token\",\n      scope: \"openid\"\n    });\n    this.login = this.login.bind(this);\n  }\n\n  login() {\n    this.auth0.authorize();\n  }\n  /* eslint no-restricted-globals :0 */\n\n\n  handleAuthtication() {\n    this.auth0.parseHash((err, authResult) => {\n      if (authResult && authResult.accessToken && authResult.idToken) {\n        let expiresAt = JSON.stringify(authResult.expiresIn * 1000 + new Date().getTime());\n        localStorage.setItem(\"access_token\", authResult.accessToken);\n        localStorage.setItem(\"id_token\", authResult.idToken);\n        localStorage.setItem(\"expires_at\", expiresAt);\n        localStorage.hash = \"\";\n        location.pathname = LOGIN_SUCCESS;\n      } else if (err) {\n        location.pathname = LOGIN_FAILURE;\n        console.log(err);\n      }\n    });\n  }\n\n  isAuthenticated() {\n    let expiresAt = localStorage.getItem(\"expires_at\");\n    return new Date();\n  }\n\n}","map":{"version":3,"sources":["C:/Somnath/Dev/Programming/JavaScript/all-react-apps/react-auth0/src/Auth.js"],"names":["auth0","LOGIN_SUCCESS","LOGIN_FAILURE","Auth","constructor","WebAuth","domain","clientID","redirectUri","audience","responseType","scope","login","bind","authorize","handleAuthtication","parseHash","err","authResult","accessToken","idToken","expiresAt","JSON","stringify","expiresIn","Date","getTime","localStorage","setItem","hash","location","pathname","console","log","isAuthenticated","getItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,UAAlB;AAEA,MAAMC,aAAa,GAAG,SAAtB;AACA,MAAMC,aAAa,GAAG,GAAtB;AAEA,eAAe,MAAMC,IAAN,CAAU;AAYrBC,EAAAA,WAAW,GAAE;AAAA,SAVbJ,KAUa,GAVL,IAAIA,KAAK,CAACK,OAAV,CAAkB;AACtBC,MAAAA,MAAM,EAAE,kBADc;AAEtBC,MAAAA,QAAQ,EAAE,kCAFY;AAGtBC,MAAAA,WAAW,EAAE,gCAHS;AAItBC,MAAAA,QAAQ,EAAE,mCAJY;AAKtBC,MAAAA,YAAY,EAAE,gBALQ;AAMtBC,MAAAA,KAAK,EAAE;AANe,KAAlB,CAUK;AACT,SAAKC,KAAL,GAAa,KAAKA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAb;AACH;;AAEDD,EAAAA,KAAK,GAAE;AACH,SAAKZ,KAAL,CAAWc,SAAX;AACH;AAED;;;AACAC,EAAAA,kBAAkB,GAAE;AAChB,SAAKf,KAAL,CAAWgB,SAAX,CAAqB,CAACC,GAAD,EAAMC,UAAN,KAAqB;AACtC,UAAGA,UAAU,IAAIA,UAAU,CAACC,WAAzB,IAAwCD,UAAU,CAACE,OAAtD,EAA8D;AAC1D,YAAIC,SAAS,GAAGC,IAAI,CAACC,SAAL,CAAgBL,UAAU,CAACM,SAAZ,GAAyB,IAAzB,GAA+B,IAAIC,IAAJ,GAAWC,OAAX,EAA9C,CAAhB;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCV,UAAU,CAACC,WAAhD;AACAQ,QAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCV,UAAU,CAACE,OAA5C;AACAO,QAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmCP,SAAnC;AACAM,QAAAA,YAAY,CAACE,IAAb,GAAoB,EAApB;AACAC,QAAAA,QAAQ,CAACC,QAAT,GAAoB9B,aAApB;AACH,OAPD,MAQK,IAAGgB,GAAH,EAAO;AACRa,QAAAA,QAAQ,CAACC,QAAT,GAAoB7B,aAApB;AACA8B,QAAAA,OAAO,CAACC,GAAR,CAAYhB,GAAZ;AACH;AACJ,KAbD;AAcH;;AAEDiB,EAAAA,eAAe,GAAE;AACb,QAAIb,SAAS,GAAGM,YAAY,CAACQ,OAAb,CAAqB,YAArB,CAAhB;AACA,WAAO,IAAIV,IAAJ,EAAP;AACH;;AAzCoB","sourcesContent":["import auth0 from 'auth0-js';\r\n\r\nconst LOGIN_SUCCESS = \"/secret\";\r\nconst LOGIN_FAILURE = \"/\";\r\n\r\nexport default class Auth{\r\n\r\n    auth0 = new auth0.WebAuth({\r\n        domain: \"musibs.auth0.com\",\r\n        clientID: \"Le06hTcIFWT27UYrBw4c8ByPnSNVcolq\",\r\n        redirectUri: \"http://localhost:3000/callback\",\r\n        audience: \"https://musibs.auth0.com/userinfo\",\r\n        responseType: \"token id_token\",\r\n        scope: \"openid\"\r\n    })\r\n\r\n\r\n    constructor(){\r\n        this.login = this.login.bind(this);\r\n    }\r\n\r\n    login(){\r\n        this.auth0.authorize(); \r\n    }\r\n\r\n    /* eslint no-restricted-globals :0 */\r\n    handleAuthtication(){\r\n        this.auth0.parseHash((err, authResult) => {\r\n            if(authResult && authResult.accessToken && authResult.idToken){\r\n                let expiresAt = JSON.stringify((authResult.expiresIn) * 1000 +new Date().getTime());\r\n                localStorage.setItem(\"access_token\", authResult.accessToken);\r\n                localStorage.setItem(\"id_token\", authResult.idToken);\r\n                localStorage.setItem(\"expires_at\", expiresAt);\r\n                localStorage.hash = \"\";\r\n                location.pathname = LOGIN_SUCCESS;\r\n            }\r\n            else if(err){\r\n                location.pathname = LOGIN_FAILURE;\r\n                console.log(err);\r\n            }\r\n        });\r\n    }\r\n\r\n    isAuthenticated(){\r\n        let expiresAt = localStorage.getItem(\"expires_at\");\r\n        return new Date\r\n    }\r\n} "]},"metadata":{},"sourceType":"module"}